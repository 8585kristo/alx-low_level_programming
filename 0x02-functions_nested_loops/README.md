project functions and nested loop
